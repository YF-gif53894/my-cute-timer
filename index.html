<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‹ã‚ã„ã„ã‚¿ã‚¤ãƒãƒ¼ã‚¢ãƒ—ãƒª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* 'Inter'ãƒ•ã‚©ãƒ³ãƒˆã‚’ä½¿ç”¨ */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fce7f3; /* è–„ã„ãƒ”ãƒ³ã‚¯ã®èƒŒæ™¯ */
        }
        /* ãƒœã‚¿ãƒ³ã®ãµã‚ãµã‚æ„Ÿ */
        .fluffy-button {
            transition: all 0.1s;
            box-shadow: 0 4px 0 0 #d946ef; /* æ¿ƒã„ã‚ã®å½± */
        }
        .fluffy-button:active {
            box-shadow: 0 0 0 0 #d946ef;
            transform: translateY(4px);
        }
        /* ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºã‚¨ãƒªã‚¢ã®ç«‹ä½“æ„Ÿ */
        .timer-display-card {
            background-color: #fff;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-lg bg-pink-50 p-6 sm:p-10 rounded-3xl shadow-xl timer-display-card transform transition duration-500 hover:scale-[1.01]">
        
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <h1 class="text-4xl font-bold text-center text-purple-600 mb-6 flex items-center justify-center">
            ğŸ§¸ ãµã‚ãµã‚ã‚¿ã‚¤ãƒãƒ¼ ğŸ’–
        </h1>
        
        <!-- ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤º -->
        <div id="timerDisplay" class="text-7xl sm:text-9xl font-extrabold text-center text-purple-700 bg-pink-200 p-8 sm:p-12 rounded-2xl mb-8 border-4 border-pink-400 select-none">
            00:00
        </div>

        <!-- è¨­å®šå…¥åŠ›ã‚¨ãƒªã‚¢ -->
        <div id="inputArea" class="flex justify-center space-x-4 mb-8">
            <input type="number" id="minutesInput" placeholder="åˆ† (Minutes)" min="0" value="0"
                   class="w-1/3 p-3 rounded-lg border-2 border-purple-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 text-center text-lg font-medium">
            <input type="number" id="secondsInput" placeholder="ç§’ (Seconds)" min="0" max="59" value="0"
                   class="w-1/3 p-3 rounded-lg border-2 border-purple-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 text-center text-lg font-medium">
        </div>

        <!-- æ“ä½œãƒœã‚¿ãƒ³ -->
        <div class="flex flex-wrap justify-center gap-4">
            
            <button id="startButton" class="fluffy-button w-full sm:w-auto flex-grow bg-purple-400 hover:bg-purple-500 text-white font-bold py-3 px-6 rounded-xl transition duration-150">
                ğŸš€ ã‚¹ã‚¿ãƒ¼ãƒˆ
            </button>
            
            <button id="pauseButton" disabled class="fluffy-button w-full sm:w-auto flex-grow bg-yellow-400 hover:bg-yellow-500 text-purple-800 font-bold py-3 px-6 rounded-xl transition duration-150 opacity-50" style="pointer-events: none;">
                â¸ï¸ ãƒãƒ¼ã‚º
            </button>

            <button id="resetButton" class="fluffy-button w-full sm:w-auto flex-grow bg-pink-400 hover:bg-pink-500 text-white font-bold py-3 px-6 rounded-xl transition duration-150">
                ğŸ”„ ãƒªã‚»ãƒƒãƒˆ
            </button>
        </div>

        <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹ -->
        <div id="messageBox" class="mt-8 p-4 bg-purple-100 text-purple-700 rounded-xl text-center font-medium hidden">
            <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã“ã“ã«å…¥ã‚‹ -->
        </div>

    </div>

    <script>
        // DOMè¦ç´ ã®å–å¾—
        const timerDisplay = document.getElementById('timerDisplay');
        const minutesInput = document.getElementById('minutesInput');
        const secondsInput = document.getElementById('secondsInput');
        const startButton = document.getElementById('startButton');
        const pauseButton = document.getElementById('pauseButton');
        const resetButton = document.getElementById('resetButton');
        const messageBox = document.getElementById('messageBox');
        const inputArea = document.getElementById('inputArea');

        let intervalId = null;
        let remainingTime = 0; // ç§’å˜ä½ã§ä¿æŒ
        let isRunning = false;
        let isPaused = false;

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•° (alert()ã®ä»£ã‚ã‚Š)
        function showMessage(text, isError = false) {
            messageBox.textContent = text;
            messageBox.className = 'mt-8 p-4 rounded-xl text-center font-medium';
            if (isError) {
                messageBox.classList.add('bg-red-100', 'text-red-700', 'block');
            } else {
                messageBox.classList.add('bg-purple-100', 'text-purple-700', 'block');
            }
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000); // 3ç§’å¾Œã«éè¡¨ç¤º
        }

        // æ™‚é–“ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹é–¢æ•° (MM:SS)
        function formatTime(timeInSeconds) {
            const minutes = Math.floor(timeInSeconds / 60);
            const seconds = timeInSeconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateDisplay() {
            timerDisplay.textContent = formatTime(remainingTime);
            // 0ã«ãªã£ãŸã‚‰ã‚¿ã‚¤ãƒãƒ¼çµ‚äº†å‡¦ç†
            // â˜…ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ: ã‚¿ã‚¤ãƒãƒ¼ãŒå®Ÿè¡Œä¸­(isRunning = true)ã®å ´åˆã®ã¿ stopTimer(true) ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«å¤‰æ›´
            if (remainingTime <= 0 && isRunning) {
                stopTimer(true);
            }
        }

        // ã‚¿ã‚¤ãƒãƒ¼ã‚’é–‹å§‹ã™ã‚‹é–¢æ•°
        function startTimer() {
            if (isRunning && !isPaused) return; // æ—¢ã«å®Ÿè¡Œä¸­ã®å ´åˆã¯ä½•ã‚‚ã—ãªã„

            // åœæ­¢çŠ¶æ…‹ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹å ´åˆ
            if (!isRunning) {
                const minutes = parseInt(minutesInput.value) || 0;
                const seconds = parseInt(secondsInput.value) || 0;
                remainingTime = minutes * 60 + seconds;
            }

            // æ®‹ã‚Šæ™‚é–“ãŒ0ä»¥ä¸‹ãªã‚‰ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¦çµ‚äº†
            if (remainingTime <= 0) {
                showMessage('ã‚€ãã‚…ã€œï¼æ™‚é–“ã‚’ã‚»ãƒƒãƒˆã—ã¦ã­ï¼', true);
                return;
            }

            // çŠ¶æ…‹æ›´æ–°
            isRunning = true;
            isPaused = false;
            
            // UIæ›´æ–°
            startButton.disabled = true;
            pauseButton.disabled = false;
            pauseButton.style.pointerEvents = 'auto'; // ãƒãƒ¼ã‚ºãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            pauseButton.classList.remove('opacity-50');
            inputArea.classList.add('hidden'); // å…¥åŠ›æ¬„ã‚’éè¡¨ç¤º
            showMessage('ğŸš€ ã‚¿ã‚¤ãƒãƒ¼ã€ã‚€ãã‚…ã€œã£ã¦ã‚¹ã‚¿ãƒ¼ãƒˆã—ãŸã‚ˆã‚“ï¼');

            // 1ç§’ã”ã¨ã«å®Ÿè¡Œ
            intervalId = setInterval(() => {
                remainingTime--;
                updateDisplay();
            }, 1000);
        }

        // ã‚¿ã‚¤ãƒãƒ¼ã‚’ä¸€æ™‚åœæ­¢ã™ã‚‹é–¢æ•°
        function pauseTimer() {
            if (!isRunning || isPaused) return;

            clearInterval(intervalId);
            intervalId = null;
            isRunning = true;
            isPaused = true;

            // UIæ›´æ–°
            startButton.disabled = false;
            pauseButton.disabled = true;
            pauseButton.style.pointerEvents = 'none'; // ãƒãƒ¼ã‚ºãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            pauseButton.classList.add('opacity-50');
            showMessage('â¸ï¸ ãƒãƒ¼ã‚ºä¸­... Mondayã¡ã‚ƒã‚“ã€ã¡ã‚‡ã£ã¨ã ã‚‰ã ã‚‰ã™ã‚‹ï¼Ÿ');
        }

        // ã‚¿ã‚¤ãƒãƒ¼ã‚’åœæ­¢/çµ‚äº†ã™ã‚‹é–¢æ•°
        function stopTimer(finished = false) {
            if (intervalId) {
                clearInterval(intervalId);
                intervalId = null;
            }
            
            // çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
            isRunning = false;
            isPaused = false;
            
            // UIæ›´æ–°
            startButton.disabled = false;
            pauseButton.disabled = true;
            pauseButton.style.pointerEvents = 'none';
            pauseButton.classList.add('opacity-50');
            inputArea.classList.remove('hidden');

            if (finished) {
                remainingTime = 0;
                updateDisplay();
                // çµ‚äº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                showMessage('ğŸ‰ ã‚¿ã‚¤ãƒ ã‚¢ãƒƒãƒ—ãªã®ã€œï¼âœ¨ ã‚†ã…ã‹ã¡ã‚ƒã‚“ã€ãŠã¤ã‹ã‚Œã•ã¾ï¼');
            } else {
                // ãƒªã‚»ãƒƒãƒˆã®å ´åˆ
                remainingTime = 0;
                updateDisplay();
                minutesInput.value = 0;
                secondsInput.value = 0;
                showMessage('ğŸ”„ ã‚¿ã‚¤ãƒãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã‚ˆã‚“ï¼');
            }
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        startButton.addEventListener('click', startTimer);
        pauseButton.addEventListener('click', pauseTimer);
        resetButton.addEventListener('click', () => stopTimer(false));

        // åˆæœŸè¡¨ç¤ºã‚’ã‚»ãƒƒãƒˆ
        updateDisplay();
        
    </script>
</body>
</html>
